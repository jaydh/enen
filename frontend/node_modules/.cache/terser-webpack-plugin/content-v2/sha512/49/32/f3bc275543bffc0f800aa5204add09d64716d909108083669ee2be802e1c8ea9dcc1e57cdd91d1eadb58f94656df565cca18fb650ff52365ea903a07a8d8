{"map":"{\"version\":3,\"sources\":[\"/home/jay/enen/frontend/src/actions/article/addArticle.ts\",\"/home/jay/enen/frontend/src/components/actionDispatchers/AddArticle.tsx\",\"/home/jay/enen/frontend/src/components/ArticleViewer/EmbeddedArticle.tsx\"],\"names\":[\"AddArticleFulfilled\",\"url\",\"id\",\"addedAt\",\"type\",\"addArticle\",\"_ref\",\"Object\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default\",\"a\",\"mark\",\"_callee2\",\"dispatch\",\"getState\",\"token\",\"data\",\"_id\",\"request\",\"interval\",\"wrap\",\"_context2\",\"prev\",\"next\",\"user\",\"axios\",\"method\",\"concat\",\"serverIP\",\"headers\",\"Authorization\",\"then\",\"res\",\"catch\",\"error\",\"console\",\"log\",\"sent\",\"Date\",\"_ref2\",\"_callee\",\"article\",\"_context\",\"params\",\"fetching\",\"window\",\"clearInterval\",\"stop\",\"apply\",\"this\",\"arguments\",\"setInterval\",\"_x\",\"_x2\",\"AddArticle\",\"props\",\"_this\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__\",\"call\",\"handleSubmit\",\"bind\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__\",\"classes\",\"react__WEBPACK_IMPORTED_MODULE_9__\",\"_material_ui_core__WEBPACK_IMPORTED_MODULE_6__\",\"color\",\"onClick\",\"_material_ui_icons__WEBPACK_IMPORTED_MODULE_8__\",\"className\",\"button\",\"event\",\"preventDefault\",\"link\",\"React\",\"connect\",\"ownProps\",\"bindActionCreators\",\"withStyles\",\"fontSize\",\"Highlight\",\"Loadable\",\"loader\",\"__webpack_require__\",\"e\",\"t\",\"loading\",\"Loader\",\"Embedded\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__\",\"handleExpand\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default\",\"setState\",\"show\",\"state\",\"HTML\",\"getArticleData\",\"getArticlesInView\",\"requestedParses\",\"articleLinks\",\"filter\",\"elementInView\",\"forEach\",\"find\",\"href\",\"_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__\",\"requestServerParse\",\"rect\",\"getBoundingClientRect\",\"top\",\"left\",\"bottom\",\"innerHeight\",\"document\",\"documentElement\",\"clientHeight\",\"right\",\"innerWidth\",\"clientWidth\",\"transform\",\"node\",\"index\",\"_this$props\",\"name\",\"startsWith\",\"react__WEBPACK_IMPORTED_MODULE_11__\",\"_material_ui_core__WEBPACK_IMPORTED_MODULE_8__\",\"variant\",\"gutterBottom\",\"style\",\"convertNodeToElement\",\"attribs\",\"class\",\"container\",\"justify\",\"image\",\"paragraph\",\"pre\",\"quote\",\"children\",\"map\",\"articleNodeList\",\"Array\",\"from\",\"querySelectorAll\",\"el\",\"textContent\",\"intervalId\",\"_this2\",\"_this$props2\",\"hyperlinkName\",\"_this$state\",\"metadata\",\"title\",\"siteName\",\"description\",\"excerpt\",\"subtitle\",\"target\",\"rel\",\"_material_ui_icons_ChromeReaderMode__WEBPACK_IMPORTED_MODULE_10___default\",\"_actionDispatchers_AddArticle__WEBPACK_IMPORTED_MODULE_20__\",\"timeout\",\"in\",\"embed\",\"alignItems\",\"ReactHTMLParser\",\"decodeEntities\",\"ui\",\"uid\",\"paddingLeft\",\"padding\",\"borderLeft\",\"margin\",\"marginBottom\"],\"mappings\":\"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\",\"sourcesContent\":[\"import axios from 'axios';\\nimport { serverIP } from '../../hosts';\\n\\nexport interface IAddArticleRequested {\\n  type: 'ADD_ARTICLE_REQUESTED';\\n}\\nexport interface IAddArticleFulfilled {\\n  type: 'ADD_ARTICLE_FULFILLED';\\n  url: string;\\n  id: string;\\n  addedAt: Date;\\n}\\nexport interface IAddArticleRejected {\\n  reason: string;\\n  type: 'ADD_ARTICLE_REJECTED';\\n}\\n\\nexport interface IAddArticle {\\n  type: 'ADD_ARTICLE';\\n  articleLink: string;\\n  project?: string;\\n}\\n\\nfunction AddArticleRequested(): IAddArticleRequested {\\n  return {\\n    type: 'ADD_ARTICLE_REQUESTED'\\n  };\\n}\\n\\nfunction AddArticleRejected(reason: string): IAddArticleRejected {\\n  return {\\n    reason,\\n    type: 'ADD_ARTICLE_REJECTED'\\n  };\\n}\\n\\nfunction AddArticleFulfilled(\\n  url: string,\\n  id: string,\\n  addedAt: Date\\n): IAddArticleFulfilled {\\n  return {\\n    addedAt,\\n    id,\\n    url,\\n    type: 'ADD_ARTICLE_FULFILLED'\\n  };\\n}\\n\\nexport default function addArticle(url: string) {\\n  return async (dispatch: any, getState: any) => {\\n    dispatch(AddArticleRequested());\\n    const token = getState().user.token;\\n    const data = await axios({\\n      method: 'POST',\\n      url: `${serverIP}/user/save`,\\n      headers: { Authorization: `Bearer ${token}` },\\n      data: { url }\\n    })\\n      .then(res => {\\n        return res && res.data;\\n      })\\n      .catch(function(error) {\\n        console.log(error);\\n      });\\n    const { _id } = data;\\n    dispatch(AddArticleFulfilled(url, _id, new Date()));\\n    const request = async () => {\\n      const article = await axios({\\n        method: 'GET',\\n        url: `${serverIP}/article/id`,\\n        params: { id: _id }\\n      })\\n        .then(res => res.data)\\n        .catch(function(error) {\\n          console.log(error);\\n        });\\n      console.log(article);\\n\\n      // Stop polling after server signals done fetching\\n      if (article && !article.fetching) {\\n        window.clearInterval(interval);\\n        dispatch({ type: 'UPDATE_ARTICLE', id: _id, data: article });\\n      }\\n    };\\n    const interval = window.setInterval(request, 1500);\\n  };\\n}\\n\",\"import { IconButton, withStyles } from \\\"@material-ui/core\\\";\\nimport { Bookmark } from \\\"@material-ui/icons\\\";\\nimport * as React from \\\"react\\\";\\nimport { connect } from \\\"react-redux\\\";\\nimport { bindActionCreators } from \\\"redux\\\";\\nimport addArticle from \\\"../../actions/article/addArticle\\\";\\n\\ninterface IProps {\\n  addArticle: (t: string) => (dispatch: any, getState: any) => Promise<void>;\\n  link: string;\\n  classes: any;\\n}\\nconst styles = {\\n  button: { fontSize: \\\"15px\\\" }\\n};\\nclass AddArticle extends React.Component<IProps> {\\n  constructor(props: any) {\\n    super(props);\\n    this.handleSubmit = this.handleSubmit.bind(this);\\n  }\\n\\n  public render() {\\n    const { classes } = this.props;\\n    return (\\n      <IconButton color=\\\"primary\\\" onClick={this.handleSubmit}>\\n        <Bookmark className={classes.button} />\\n      </IconButton>\\n    );\\n  }\\n\\n  private handleSubmit(event: any) {\\n    event.preventDefault();\\n    this.props.addArticle(this.props.link);\\n  }\\n}\\n\\nconst mapDispatchToProps = (dispatch: any, ownProps: any) =>\\n  bindActionCreators({ addArticle }, dispatch);\\n\\nexport default connect(\\n  null,\\n  mapDispatchToProps\\n)(withStyles(styles)(AddArticle));\\n\",\"import {\\n  CircularProgress,\\n  Grid,\\n  Collapse,\\n  Divider,\\n  IconButton,\\n  Paper,\\n  withStyles,\\n  Typography\\n} from \\\"@material-ui/core\\\";\\nimport Read from \\\"@material-ui/icons/ChromeReaderMode\\\";\\nimport * as React from \\\"react\\\";\\nimport ReactHTMLParser, { convertNodeToElement } from \\\"react-html-parser\\\";\\nimport Loadable from \\\"react-loadable\\\";\\nimport { connect } from \\\"react-redux\\\";\\nimport Loader from \\\"../../components/Loader\\\";\\nimport { serverIP } from \\\"../../hosts\\\";\\nimport axios from \\\"axios\\\";\\nimport { produce } from \\\"immer\\\";\\nimport { bindActionCreators, Dispatch } from \\\"redux\\\";\\nimport { requestServerParse } from \\\"../../actions/article/requestParse\\\";\\nimport AddArticle from \\\"../actionDispatchers/AddArticle\\\";\\n\\nconst Highlight = Loadable({\\n  loader: () => import(\\\"react-highlight\\\"),\\n  loading: Loader\\n});\\n\\nconst styles = {\\n  button: { fontSize: \\\"15px\\\" },\\n  embed: { paddingLeft: \\\"1em\\\" },\\n  image: { padding: \\\"4em\\\" },\\n  pre: { borderLeft: \\\"4px outset gray\\\", margin: \\\"2em\\\", paddingLeft: \\\"1em\\\" },\\n  quote: { borderLeft: \\\"4px outset purple\\\", margin: \\\"2em\\\", paddingLeft: \\\"1em\\\" },\\n  title: { marginBottom: \\\"4em\\\" }\\n};\\n\\ninterface IProps {\\n  url: string;\\n  hyperlinkName: string;\\n  classes: any;\\n  fontSize: number;\\n  requestServerParse: (url: string) => void;\\n}\\n\\ninterface IState {\\n  show: boolean;\\n  articleLinks: HTMLAnchorElement[];\\n  articleNodeList: Element[];\\n  HTML?: string;\\n  metadata?: { title: string; excerpt: string; siteName: string };\\n  fetching: boolean;\\n  intervalId?: any;\\n  requestedParses: string[];\\n}\\n\\nclass Embedded extends React.Component<IProps, IState> {\\n  constructor(props: IProps) {\\n    super(props);\\n    this.state = {\\n      show: false,\\n      fetching: true,\\n      articleLinks: [],\\n      articleNodeList: [],\\n      requestedParses: []\\n    };\\n  }\\n\\n  public async componentDidMount() {\\n    // Find all nodes in page with textContent\\n    await this.setState({\\n      articleLinks: Array.from(document.querySelectorAll(\\\"div.page a\\\")),\\n      articleNodeList: Array.from(\\n        document.querySelectorAll(\\\"div.page p\\\")\\n      ).filter(el => el.textContent)\\n    });\\n\\n    const intervalId = setInterval(() => {\\n      this.getArticlesInView();\\n    }, 5000);\\n    this.setState({ intervalId });\\n  }\\n\\n  public render() {\\n    const { url, fontSize, classes, hyperlinkName } = this.props;\\n    const { show, fetching, HTML, metadata } = this.state;\\n    const title = metadata && metadata.title ? metadata.title : url;\\n\\n    const siteName = metadata && metadata.siteName;\\n    const description = metadata && metadata.excerpt;\\n    const subtitle = `${siteName ? siteName : \\\"\\\"} ${\\n      description ? \\\"-\\\" + description : \\\"\\\"\\n    }`;\\n    return (\\n      <span>\\n        <a href={url} target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">\\n          {hyperlinkName}\\n        </a>\\n        <IconButton onClick={this.handleExpand} color=\\\"primary\\\">\\n          <Read className={classes.button} />\\n        </IconButton>\\n        <AddArticle link={url} />\\n        {show && (\\n          <Collapse\\n            timeout={500}\\n            in={show}\\n            children={\\n              <Paper className={classes.embed} style={{ fontSize }}>\\n                {fetching && (\\n                  <Grid container={true} alignItems=\\\"center\\\" justify=\\\"center\\\">\\n                    <CircularProgress />\\n                  </Grid>\\n                )}\\n                <>\\n                  <Typography\\n                    style={{ fontSize: fontSize + 10 }}\\n                    variant=\\\"title\\\"\\n                  >\\n                    {title}\\n                  </Typography>\\n                  <Typography\\n                    style={{ fontSize: fontSize + 2 }}\\n                    variant=\\\"subtitle1\\\"\\n                  >\\n                    {subtitle}\\n                  </Typography>\\n                  <Divider className={classes.title} />\\n\\n                  {ReactHTMLParser(HTML, {\\n                    decodeEntities: false,\\n                    transform: this.transform\\n                  })}\\n                </>\\n              </Paper>\\n            }\\n          />\\n        )}{\\\" \\\"}\\n      </span>\\n    );\\n  }\\n\\n  private handleExpand = async () => {\\n    this.setState({ show: !this.state.show });\\n    if (!this.state.HTML) {\\n      this.getArticleData();\\n    }\\n  };\\n\\n  private getArticleData = () => {\\n    const { url } = this.props;\\n    return axios({\\n      method: \\\"GET\\\",\\n      url: `${serverIP}/article/url`,\\n      params: { url }\\n    })\\n      .then(res => {\\n        console.log(res);\\n        return this.setState(res.data);\\n      })\\n      .catch(function(error) {\\n        console.log(error);\\n      });\\n  };\\n\\n  private getArticlesInView = () => {\\n    const { requestedParses } = this.state;\\n    const targets = this.state.articleLinks.filter((e: HTMLAnchorElement) =>\\n      this.elementInView(e)\\n    );\\n    targets.forEach(async (e: HTMLAnchorElement) => {\\n      if (!requestedParses.find((url: string) => url === e.href)) {\\n        this.setState({requestedParses:[...this.state.requestedParses,e.href]});\\n        this.props.requestServerParse(e.href);\\n      }\\n    });\\n  };\\n\\n  private elementInView = (e: Element) => {\\n    const rect = e.getBoundingClientRect();\\n    return (\\n      rect.top >= 0 &&\\n      rect.left >= 0 &&\\n      rect.bottom <=\\n        (window.innerHeight || document.documentElement!.clientHeight) &&\\n      rect.right <= (window.innerWidth || document.documentElement!.clientWidth)\\n    );\\n  };\\n\\n  private transform = (node: any, index: number) => {\\n    if (node) {\\n      const { classes, fontSize } = this.props;\\n      if (node.name && node.name.startsWith(\\\"h\\\")) {\\n        return (\\n          <Typography\\n            variant=\\\"h1\\\"\\n            gutterBottom={true}\\n            style={{ fontSize: fontSize + 4 }}\\n          >\\n            {convertNodeToElement(node, index, this.transform)}\\n          </Typography>\\n        );\\n      }\\n      if (node.name === \\\"img\\\") {\\n        node.attribs.class = \\\"img-fluid\\\";\\n        return (\\n          <Grid container={true} justify=\\\"center\\\" className={classes.image}>\\n            {convertNodeToElement(node, index, this.transform)}\\n          </Grid>\\n        );\\n      }\\n      if (node.name === \\\"p\\\") {\\n        return (\\n          <Typography paragraph={true} style={{ fontSize }}>\\n            {convertNodeToElement(node, index, this.transform)}\\n          </Typography>\\n        );\\n      }\\n      if (node.name === \\\"pre\\\") {\\n        return (\\n          <div className={classes.pre}>\\n            <Highlight>{convertNodeToElement(node)}</Highlight>\\n          </div>\\n        );\\n      }\\n      if (node.name === \\\"blockquote\\\") {\\n        return (\\n          <div className={classes.quote}>\\n            {node.children.map((t: any) => (\\n              <Typography style={{ fontSize }}>\\n                {t.data ? t.data : null}\\n              </Typography>\\n            ))}\\n          </div>\\n        );\\n      }\\n\\n      return undefined;\\n    }\\n    return undefined;\\n  };\\n}\\n\\nconst mapStateToProps = (state: any, ownProps: any) => {\\n  return {\\n    fontSize: state.ui.fontSize,\\n    uid: state.user.uid\\n  };\\n};\\n\\nconst mapDispatchToProps = (dispatch: Dispatch) =>\\n  bindActionCreators({ requestServerParse }, dispatch);\\n\\nexport default connect(\\n  mapStateToProps,\\n  mapDispatchToProps\\n)(withStyles(styles)(Embedded));\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{362:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return l});var r=n(341),a=n.n(r),c=n(342),i=n(344),o=n.n(i),s=n(343);function u(e,t,n){return{addedAt:n,id:t,url:e,type:\"ADD_ARTICLE_FULFILLED\"}}function l(e){return function(){var t=Object(c.a)(a.a.mark(function t(n,r){var i,l,m,d,f;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:\"ADD_ARTICLE_REQUESTED\"}),i=r().user.token,t.next=4,o()({method:\"POST\",url:\"\".concat(s.a,\"/user/save\"),headers:{Authorization:\"Bearer \".concat(i)},data:{url:e}}).then(function(e){return e&&e.data}).catch(function(e){console.log(e)});case 4:l=t.sent,m=l._id,n(u(e,m,new Date)),d=function(){var e=Object(c.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()({method:\"GET\",url:\"\".concat(s.a,\"/article/id\"),params:{id:m}}).then(function(e){return e.data}).catch(function(e){console.log(e)});case 2:t=e.sent,console.log(t),t&&!t.fetching&&(window.clearInterval(f),n({type:\"UPDATE_ARTICLE\",id:m,data:t}));case 5:case\"end\":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),f=window.setInterval(d,1500);case 9:case\"end\":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}},383:function(e,t,n){\"use strict\";var r=n(35),a=n(36),c=n(38),i=n(37),o=n(75),s=n(39),u=n(53),l=n(21),m=n(356),d=n(1),f=n(74),p=n(15),h=n(362),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n}return Object(s.a)(t,e),Object(a.a)(t,[{key:\"render\",value:function(){var e=this.props.classes;return d.createElement(u.p,{color:\"primary\",onClick:this.handleSubmit},d.createElement(m.a,{className:e.button}))}},{key:\"handleSubmit\",value:function(e){e.preventDefault(),this.props.addArticle(this.props.link)}}]),t}(d.Component);t.a=Object(f.b)(null,function(e,t){return Object(p.bindActionCreators)({addArticle:h.a},e)})(Object(l.withStyles)({button:{fontSize:\"15px\"}})(b))},6035:function(e,t,n){\"use strict\";n.r(t);var r=n(364),a=n(341),c=n.n(a),i=n(342),o=n(35),s=n(36),u=n(38),l=n(37),m=n(39),d=n(53),f=n(21),p=n(381),h=n.n(p),b=n(1),v=n(446),E=n.n(v),g=n(33),w=n.n(g),y=n(74),j=n(34),S=n(343),O=n(344),k=n.n(O),A=n(15),L=n(461),x=n(383),N=w()({loader:function(){return n.e(2).then(n.t.bind(null,5845,7))},loading:j.a}),T=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleExpand=Object(i.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({show:!n.state.show}),n.state.HTML||n.getArticleData();case 2:case\"end\":return e.stop()}},e)})),n.getArticleData=function(){var e=n.props.url;return k()({method:\"GET\",url:\"\".concat(S.a,\"/article/url\"),params:{url:e}}).then(function(e){return console.log(e),n.setState(e.data)}).catch(function(e){console.log(e)})},n.getArticlesInView=function(){var e=n.state.requestedParses;n.state.articleLinks.filter(function(e){return n.elementInView(e)}).forEach(function(){var t=Object(i.a)(c.a.mark(function t(a){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.find(function(e){return e===a.href})||(n.setState({requestedParses:[].concat(Object(r.a)(n.state.requestedParses),[a.href])}),n.props.requestServerParse(a.href));case 1:case\"end\":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},n.elementInView=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},n.transform=function(e,t){if(e){var r=n.props,a=r.classes,c=r.fontSize;return e.name&&e.name.startsWith(\"h\")?b.createElement(d.B,{variant:\"h1\",gutterBottom:!0,style:{fontSize:c+4}},Object(v.convertNodeToElement)(e,t,n.transform)):\"img\"===e.name?(e.attribs.class=\"img-fluid\",b.createElement(d.m,{container:!0,justify:\"center\",className:a.image},Object(v.convertNodeToElement)(e,t,n.transform))):\"p\"===e.name?b.createElement(d.B,{paragraph:!0,style:{fontSize:c}},Object(v.convertNodeToElement)(e,t,n.transform)):\"pre\"===e.name?b.createElement(\"div\",{className:a.pre},b.createElement(N,null,Object(v.convertNodeToElement)(e))):\"blockquote\"===e.name?b.createElement(\"div\",{className:a.quote},e.children.map(function(e){return b.createElement(d.B,{style:{fontSize:c}},e.data?e.data:null)})):void 0}},n.state={show:!1,fetching:!0,articleLinks:[],articleNodeList:[],requestedParses:[]},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:\"componentDidMount\",value:function(){var e=Object(i.a)(c.a.mark(function e(){var t,n=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({articleLinks:Array.from(document.querySelectorAll(\"div.page a\")),articleNodeList:Array.from(document.querySelectorAll(\"div.page p\")).filter(function(e){return e.textContent})});case 2:t=setInterval(function(){n.getArticlesInView()},5e3),this.setState({intervalId:t});case 4:case\"end\":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this.props,t=e.url,n=e.fontSize,r=e.classes,a=e.hyperlinkName,c=this.state,i=c.show,o=c.fetching,s=c.HTML,u=c.metadata,l=u&&u.title?u.title:t,m=u&&u.siteName,f=u&&u.excerpt,p=\"\".concat(m||\"\",\" \").concat(f?\"-\"+f:\"\");return b.createElement(\"span\",null,b.createElement(\"a\",{href:t,target:\"_blank\",rel:\"noopener noreferrer\"},a),b.createElement(d.p,{onClick:this.handleExpand,color:\"primary\"},b.createElement(h.a,{className:r.button})),b.createElement(x.a,{link:t}),i&&b.createElement(d.g,{timeout:500,in:i,children:b.createElement(d.y,{className:r.embed,style:{fontSize:n}},o&&b.createElement(d.m,{container:!0,alignItems:\"center\",justify:\"center\"},b.createElement(d.e,null)),b.createElement(b.Fragment,null,b.createElement(d.B,{style:{fontSize:n+10},variant:\"title\"},l),b.createElement(d.B,{style:{fontSize:n+2},variant:\"subtitle1\"},p),b.createElement(d.h,{className:r.title}),E()(s,{decodeEntities:!1,transform:this.transform})))}),\" \")}}]),t}(b.Component);t.default=Object(y.b)(function(e,t){return{fontSize:e.ui.fontSize,uid:e.user.uid}},function(e){return Object(A.bindActionCreators)({requestServerParse:L.a},e)})(Object(f.withStyles)({button:{fontSize:\"15px\"},embed:{paddingLeft:\"1em\"},image:{padding:\"4em\"},pre:{borderLeft:\"4px outset gray\",margin:\"2em\",paddingLeft:\"1em\"},quote:{borderLeft:\"4px outset purple\",margin:\"2em\",paddingLeft:\"1em\"},title:{marginBottom:\"4em\"}})(T))}}]);","extractedComments":[]}