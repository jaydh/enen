{"version":3,"sources":["hosts.ts","actions/article/requestParse.ts","components/ArticleViewer/component.tsx","actions/article/updateBookmark.ts","actions/updateLastArticle.ts","actions/article/updateProgress.ts","components/ArticleViewer/index.ts"],"names":["__webpack_require__","d","__webpack_exports__","serverIP","requestServerParse","url","_ref","Object","_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_jay_enen_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","dispatch","wrap","_context","prev","next","axios","method","concat","data","then","res","catch","error","console","log","sent","stop","_x","apply","this","arguments","Highlight","Loadable","delay","loader","e","t","bind","loading","Loader","EmbeddedArticle","Promise","all","ArticleView","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getArticleData","asyncToGenerator","regenerator_default","id","article","HTMLData","t0","HTML","fetching","metadata","params","abrupt","transform","node","index","_this$props","classes","fontSize","name","startsWith","react","index_es","variant","gutterBottom","align","convertNodeToElement","attribs","class","container","item","justify","className","image","paragraph","inline","style","pre","quote","children","map","hyperlinkName","href","getBookmark","elements","state","articleNodeList","match","i","max","length","element","elementInView","newBookmark","textContent","bookmark","updateBookmark","getArticlesInView","requestedParses","articleLinks","filter","forEach","_ref2","_callee2","_context2","find","setState","toConsumableArray","_x2","rect","getBoundingClientRect","top","left","bottom","window","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","scrollToBookmark","target","Array","from","el","scrollIntoView","behavior","block","getProgress","h","getElementById","b","body","st","sh","newProgress","progress","updateProgress","intervalId","articleId","updateLastArticle","title","querySelectorAll","setInterval","_this2","clearInterval","_this$props2","_this$state","html","he","ogTitle","siteName","ogSiteName","description","excerpt","subtitle","alignItems","xs","sm","md","lg","root","elevation","pastDelay","isLoading","lineHeight","ReactHTMLParser","decodeEntities","React","withStyles","padding","borderLeft","margin","paddingLeft","marginBottom","updateBookmarkFulfilled","type","getState","token","user","headers","Authorization","reason","updateProgressCompleted","connect","ownProps","ui","uid","articles","articleData","bindActionCreators","component"],"mappings":"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","file":"static/js/11.92f41908.chunk.js","sourcesContent":["export const serverIP = '';\n","import { serverIP } from \"../../hosts\";\nimport axios from \"axios\";\n\nexport const requestServerParse = (url: string) => {\n  return async dispatch => {\n    const id = await axios({\n      method: \"POST\",\n      url: `${serverIP}/article`,\n      data: { url }\n    })\n      .then(res => res.data)\n      .catch(function(error) {\n        console.log(error);\n      });\n  };\n};\n","import * as React from 'react';\nimport ReactHTMLParser, { convertNodeToElement } from 'react-html-parser';\nimport Loadable from 'react-loadable';\nimport Loader from '../../components/Loader';\nimport axios from 'axios';\nimport { serverIP } from '../../hosts';\nimport { produce } from 'immer';\nimport {\n  Divider,\n  Grid,\n  Paper,\n  Typography,\n  withStyles\n} from '@material-ui/core';\nimport * as he from 'he';\n\nconst Highlight = Loadable({\n  delay: 200,\n  loader: () => import('react-highlight'),\n  loading: Loader\n});\n\nconst EmbeddedArticle = Loadable({\n  delay: 200,\n  loader: () => import('./EmbeddedArticle'),\n  loading: Loader\n});\n\nconst styles = {\n  image: { padding: '1em' },\n  pre: { borderLeft: '4px outset gray', margin: '2em', paddingLeft: '1em' },\n  quote: { borderLeft: '4px outset purple', margin: '2em', paddingLeft: '1em' },\n  root: { padding: '2em 1em' },\n  title: { marginBottom: '4em' }\n};\n\ninterface IProps {\n  article?: any;\n  fontSize: number;\n  classes: any;\n  match: any;\n  updateBookmark: (id: string, bookmark: string) => void;\n  updateProgress: (id: string, progress: number) => void;\n  updateLastArticle: (t: string) => void;\n  requestServerParse: (url: string) => void;\n}\n\ninterface IState {\n  HTML?: string;\n  url?: string;\n  metadata?: any;\n  progress?: number;\n  fetching: boolean;\n  articleLinks: HTMLAnchorElement[];\n  articleNodeList: Element[];\n  intervalId: any;\n  requestedParses: any;\n}\n\nclass ArticleView extends React.Component<IProps, IState> {\n  constructor(props: IProps) {\n    super(props);\n    this.state = {\n      articleLinks: [],\n      articleNodeList: [],\n      fetching: true,\n      intervalId: null,\n      requestedParses: []\n    };\n  }\n\n  public async componentDidMount() {\n    const articleId = this.props.match.params.id;\n    const article = await this.getArticleData(articleId);\n    const { HTML, url, metadata } = article;\n    this.props.updateLastArticle(article);\n    this.setState({ HTML, url, metadata, fetching: false });\n    document.title += ` - ${metadata.title}`;\n\n    // Find all nodes in page with textContent\n    await this.setState({\n      articleLinks: Array.from(document.querySelectorAll('div.page a')),\n      articleNodeList: Array.from(\n        document.querySelectorAll('div.page p')\n      ).filter(el => el.textContent)\n    });\n    if (this.props.article) {\n      const intervalId = setInterval(() => {\n        this.getBookmark();\n        this.getProgress();\n        this.getArticlesInView();\n      }, 5000);\n      this.scrollToBookmark();\n      this.setState({ intervalId });\n    }\n  }\n\n  public componentWillUnmount() {\n    clearInterval(this.state.intervalId);\n    document.title = 'enen';\n  }\n\n  public render() {\n    const { classes, fontSize } = this.props;\n    const { HTML: html, fetching, metadata, url } = this.state;\n    // decode HTML Entities\n    const HTML = html && he.decode(html);\n    const title =\n      metadata && (metadata.title || metadata.ogTitle)\n        ? metadata.title || metadata.ogTitle\n        : url;\n\n    const siteName = metadata && (metadata.siteName || metadata.ogSiteName);\n    const description = metadata && metadata.excerpt;\n    const subtitle = `${siteName ? siteName : ''} ${\n      description ? '-' + description : ''\n    }`;\n    return fetching || HTML ? (\n      <Grid container={true} alignItems=\"center\" justify=\"center\">\n        <Grid\n          item={true}\n          xs={12}\n          sm={12}\n          md={8}\n          lg={8}\n          className={classes.root}\n        >\n          <Paper elevation={10} className={classes.root}>\n            <Typography style={{ fontSize: fontSize + 10 }} variant=\"title\">\n              {title}\n            </Typography>\n            <Typography style={{ fontSize: fontSize + 2 }} variant=\"subtitle1\">\n              {subtitle}\n            </Typography>\n            <Divider className={classes.title} />\n            <div>\n              {fetching ? (\n                <Loader pastDelay={false} isLoading={fetching} />\n              ) : (\n                <div style={{ fontSize, lineHeight: '1.5' }}>\n                  {ReactHTMLParser(HTML, {\n                    decodeEntities: false,\n                    transform: this.transform\n                  })}\n                </div>\n              )}\n            </div>\n          </Paper>\n        </Grid>\n      </Grid>\n    ) : (\n      <Grid container={true} alignItems=\"center\" justify=\"center\">\n        <Typography variant=\"h3\">Unavailable</Typography>\n      </Grid>\n    );\n  }\n\n  private getArticleData = async (id: string) => {\n    const { article } = this.props;\n    return article && article.HTMLData\n      ? {\n          HTML: article.HTMLData,\n          fetching: false,\n          url: article.url,\n          metadata: article.metadata\n        }\n      : await axios({\n          method: 'GET',\n          url: `${serverIP}/article/id`,\n          params: { id }\n        })\n          .then(res => {\n            return res.data;\n          })\n          .catch(function(error) {\n            console.log(error);\n          });\n  };\n\n  private transform = (node: any, index: number) => {\n    const { classes, fontSize } = this.props;\n    if (node.name && node.name.startsWith('h')) {\n      return (\n        <Typography variant={node.name} gutterBottom={true} align=\"center\">\n          {convertNodeToElement(node, index, this.transform)}\n        </Typography>\n      );\n    }\n    if (node.name === 'img') {\n      node.attribs.class = 'img-fluid';\n      return (\n        <Grid container={true} item justify=\"center\" className={classes.image}>\n          {convertNodeToElement(node, index, this.transform)}\n        </Grid>\n      );\n    }\n    if (node.name === 'p') {\n      return (\n        <Typography paragraph={true} inline={true} style={{ fontSize }}>\n          {convertNodeToElement(node, index, this.transform)}\n        </Typography>\n      );\n    }\n    if (node.name === 'pre') {\n      return (\n        <div className={classes.pre}>\n          <Highlight>{convertNodeToElement(node)}</Highlight>\n        </div>\n      );\n    }\n\n    if (node.name === 'blockquote') {\n      return (\n        <div className={classes.quote}>\n          {node.children.map((t: any) => (\n            <Typography style={{ fontSize }}>\n              {t.data ? t.data : null}\n            </Typography>\n          ))}\n        </div>\n      );\n    }\n    if (\n      node.name === 'a' &&\n      node.children &&\n      node.children[0] &&\n      node.children[0].data\n    ) {\n      return (\n        <EmbeddedArticle\n          hyperlinkName={node.children[0].data}\n          url={node.attribs.href}\n        />\n      );\n    }\n    return undefined;\n  };\n\n  private getBookmark = () => {\n    const elements = this.state.articleNodeList;\n    const id = this.props.match.params.id;\n    if (elements) {\n      for (let i = 0, max = elements.length; i < max; i++) {\n        const element = elements[i];\n        if (this.elementInView(element)) {\n          // Use previous element unless first element\n          const newBookmark = elements[i > 0 ? i - 1 : i].textContent;\n          if (newBookmark && newBookmark !== this.props.article.bookmark) {\n            this.props.updateBookmark(id, newBookmark);\n            return;\n          }\n        }\n      }\n    }\n  };\n\n  private getArticlesInView = () => {\n    const { requestedParses } = this.state;\n    const targets = this.state.articleLinks.filter((e: HTMLAnchorElement) =>\n      this.elementInView(e)\n    );\n    targets.forEach(async (e: HTMLAnchorElement) => {\n      if (!requestedParses.find((url: string) => url === e.href)) {\n        this.setState({requestedParses:[...this.state.requestedParses,e.href]});\n        this.props.requestServerParse(e.href);\n      }\n    });\n  };\n\n  private elementInView = (e: Element) => {\n    const rect = e.getBoundingClientRect();\n    return (\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <=\n        (window.innerHeight || document.documentElement!.clientHeight) &&\n      rect.right <= (window.innerWidth || document.documentElement!.clientWidth)\n    );\n  };\n\n  private scrollToBookmark = () => {\n    const elements = this.state.articleNodeList;\n    const { bookmark } = this.props.article;\n    if (elements) {\n      const target = Array.from(elements).find(\n        (el: any) => el.textContent === bookmark\n      ) as HTMLElement;\n      if (target) {\n        target.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start',\n          inline: 'nearest'\n        });\n      }\n    }\n  };\n\n  private getProgress = () => {\n    const h = document.getElementById('main');\n    if (h) {\n      const id = this.props.match.params.id;\n      const b = document.body;\n      const st = 'scrollTop';\n      const sh = 'scrollHeight';\n      const newProgress =\n        ((h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight)) * 100;\n      if (newProgress !== this.state.progress) {\n        this.props.updateProgress(id, newProgress);\n        this.setState({ progress: newProgress });\n      }\n    }\n  };\n}\n\nexport default withStyles(styles)(ArticleView);\n","import axios from \"axios\";\nimport { serverIP } from \"../../hosts\";\n\nfunction updateBookmarkRequested() {\n  return {\n    type: \"UPDATE_BOOKMARK_REQUESTED\"\n  };\n}\n\nfunction updateBookmarkRejected(reason: string) {\n  return {\n    reason,\n    type: \"UPDATE_BOOKMARK_REJECTED\"\n  };\n}\n\nfunction updateBookmarkFulfilled(id: string, bookmark: string) {\n  return {\n    bookmark,\n    id,\n    type: \"UPDATE_BOOKMARK_FULFILLED\"\n  };\n}\n\nexport default function updateBookmark(id: string, bookmark: string) {\n  return async (dispatch: any, getState: any) => {\n    const token = getState().user.token;\n    dispatch(updateBookmarkRequested());\n    return axios({\n      method: \"POST\",\n      url: `${serverIP}/user/bookmark`,\n      headers: { Authorization: `Bearer ${token}` },\n      data: { id, bookmark }\n    })\n      .then(res => dispatch(updateBookmarkFulfilled(id, bookmark)))\n      .catch(error => dispatch(updateBookmarkRejected(error)));\n  };\n}\n","export default (article: any) => {\n  return { type: 'UPDATE_LAST_ARTICLE', article };\n};\n","import axios from \"axios\";\nimport { serverIP } from \"../../hosts\";\n\nfunction updateProgressRequested() {\n  return {\n    type: \"UPDATE_PROGRESS_REQUESTED\"\n  };\n}\n\nfunction updateProgressRejected(reason: string) {\n  return {\n    reason,\n    type: \"UPDATE_PROGRESS_REJECTED\"\n  };\n}\n\nfunction updateProgressCompleted(id: string, progress: number) {\n  return {\n    id,\n    progress,\n    type: \"UPDATE_PROGRESS_FULFILLED\"\n  };\n}\n\nexport default function updateProgress(id: string, progress: number) {\n  return async (dispatch: any, getState: any) => {\n    const token = getState().user.token;\n    dispatch(updateProgressRequested());\n    return axios({\n      method: \"POST\",\n      url: `${serverIP}/user/progress`,\n      headers: { Authorization: `Bearer ${token}` },\n      data: { id, progress }\n    })\n      .then(res => {\n        dispatch(updateProgressCompleted(id, progress));\n      })\n      .catch((e: string) => dispatch(updateProgressRejected(e)));\n  };\n}\n","import component from \"./component\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport updateBookmark from \"../../actions/article/updateBookmark\";\nimport updateLastArticle from \"../../actions/updateLastArticle\";\nimport updateProgress from \"../../actions/article/updateProgress\";\nimport { requestServerParse } from \"../../actions/article/requestParse\";\n\nconst mapStateToProps = (state: any, ownProps: any) => {\n  return {\n    fontSize: state.ui.fontSize,\n    uid: state.user.uid,\n    article: state.articles.articleData[ownProps.match.params.id]\n  };\n};\n\nconst mapDispatchToProps = (dispatch: any) =>\n  bindActionCreators(\n    {\n      updateLastArticle,\n      updateBookmark,\n      updateProgress,\n      requestServerParse\n    },\n    dispatch\n  );\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(component);\n"],"sourceRoot":""}